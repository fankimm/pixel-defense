# Pixel Defense - 게임 디자인 문서

## 📊 레벨 디자인 (Wave Progression)

### 웨이브 진행 시스템

#### 초기 웨이브 (1-3)
- **목적**: 기본 메커니즘 학습
- **적 구성**: Grunt만 출현
- **적 수량**: 5 → 7 → 9 (wave * 2 + 3)
- **스폰 딜레이**: 1000ms

#### 중반 초기 (4-6)
- **목적**: 속도 대응 학습
- **적 구성**: Grunt + Fast 혼합
- **Grunt 수량**: wave + 5
- **Fast 수량**: wave + 2
- **스폰 딜레이**: 800ms (Grunt), 600ms (Fast)

#### 중반 (7-10)
- **목적**: 다양한 적 대응 전략 수립
- **적 구성**: Grunt, Fast, Tank, Flying (8웨이브부터)
- **특징**:
  - Tank 도입 (HP 150, 느린 속도)
  - Flying 유닛 등장 (특정 타워만 공격 가능)
- **보스 웨이브**: 10, 20, 30... (10의 배수)

#### 후반 (11-15)
- **목적**: 자원 관리와 전략적 배치
- **적 구성 비율**:
  - Grunt: 40%
  - Fast: 30%
  - Tank: 15%
  - Flying: 15%
- **스폰 속도 증가**: 웨이브당 5-4ms씩 감소

#### 극후반 (15+)
- **목적**: 마스터리와 생존
- **특수 적 등장**:
  - Healer (15웨이브): 주변 적 치유
  - Splitter (20웨이브): 죽을 때 3개 Fast로 분열
  - Stealth (25웨이브): 주기적 은신
- **HP/보상 스케일링**:
  - HP 배율: 1 + (wave * 0.15)
  - 보상 배율: 1 + (wave * 0.05)

### 난이도 곡선
```
난이도 = floor((wave - 1) / 5)
기본 적 수 = 10 + (wave * 1.5)
스폰 딜레이 감소율 = max(최소값, 기본값 - wave * 감소량)
```

## 🎯 유닛 디자인 - 적 (Enemies)

### 기본 적

| 타입 | HP | 속도 | 보상 | 크기 | 특징 |
|------|-----|------|------|------|------|
| **Grunt** | 50 | 50 | 10💰 | 15 | 기본 유닛, 균형잡힌 스탯 |
| **Fast** | 30 | 100 | 15💰 | 12 | 낮은 HP, 빠른 속도 |
| **Tank** | 150 | 30 | 30💰 | 20 | 높은 HP, 느린 속도 |
| **Flying** | 40 | 80 | 20💰 | 13 | 공중 유닛, 특정 타워만 공격 가능 |

### 특수 적

| 타입 | HP | 속도 | 보상 | 특수 능력 |
|------|-----|------|------|-----------|
| **Healer** | 80 | 40 | 25💰 | 반경 60 내 아군 5HP/2초 치유 |
| **Splitter** | 100 | 60 | 20💰 | 죽을 때 Fast 3개로 분열 |
| **Stealth** | 60 | 70 | 35💰 | 3초 은신 / 1초 가시 반복 |
| **Boss** | 500 | 25 | 100💰 | 실드 200HP, 30% HP시 광폭화 |

### 적 AI 패턴
- **경로 추종**: 미리 정의된 경로 따라 이동
- **체력 기반 우선순위**: 타워는 가장 낮은 HP의 적 우선 공격
- **특수 상태**: 슬로우, 독, 얼음 등 디버프 적용 가능

## 🏰 유닛 디자인 - 타워 (Towers)

### 기본 타워

| 타입 | 비용 | 사거리 | 데미지 | 공격속도 | 특징 |
|------|------|--------|--------|----------|------|
| **Basic** | 50💰 | 100 | 10 | 1.0/초 | 균형잡힌 기본 타워 |
| **Sniper** | 100💰 | 200 | 30 | 0.5/초 | 장거리, 높은 데미지, 공중 공격 가능 |
| **Splash** | 150💰 | 80 | 20 | 0.8/초 | 범위 50 스플래시 데미지 |

### 특수 타워

| 타입 | 비용 | 사거리 | 주요 기능 |
|------|------|--------|-----------|
| **Freeze** | 120💰 | 90 | 50% 슬로우, 2초 지속 |
| **Laser** | 200💰 | 150 | 초당 50 데미지 연속 공격, 공중 가능 |
| **Poison** | 140💰 | 100 | 3초간 초당 3 독 데미지 |
| **Chain** | 180💰 | 120 | 최대 3체 연쇄 공격, 공중 가능 |

### 타워 업그레이드 시스템

#### 업그레이드 공식
- **비용**: 기본비용 * (1 + 레벨 * 0.5)
- **데미지 증가**: +20% per level
- **사거리 증가**: +10% per level
- **공격속도 증가**: +15% per level

#### 판매 가격
- 기본: 구매가의 50%
- 업그레이드당 추가 회수: 업그레이드 비용의 40%

### 타워 타겟팅 전략
1. **최소 HP 우선**: 가장 체력이 낮은 적 공격
2. **거리 기반 필터링**: 사거리 내 적만 대상
3. **타입 제한**:
   - 공중 유닛은 Sniper, Laser, Chain만 공격 가능
   - 은신 유닛은 탐지 불가 (가시 상태일 때만)

## 🗺️ 맵 디자인

### 경로 시스템
- **고정 경로**: 16개 웨이포인트로 구성된 S자 경로
- **그리드 기반**: 16x12 그리드 (50px per cell)
- **건설 제한**: 경로 및 주변 1칸 건설 불가

### 경로 특징
```
시작점 (0,4) → 첫 코너 (2,2) → 중앙 지그재그 → 종료점 (15,6)
총 경로 길이: 약 24 그리드 칸
```

## 💰 경제 시스템

### 자원 획득
- **시작 자금**: 100💰
- **적 처치 보상**: 적 타입별 차등 (10-100💰)
- **웨이브 보너스**: 없음 (적 처치만으로 수입)

### 자원 소비
- **타워 건설**: 50-200💰
- **타워 업그레이드**: 점진적 증가
- **타워 판매**: 투자금의 50% 회수

## 🎮 게임 밸런스 핵심 지표

### DPS 효율성 (데미지/비용)
| 타워 | DPS | 비용 | 효율성 |
|------|-----|------|--------|
| Basic | 10 | 50 | 0.20 |
| Sniper | 15 | 100 | 0.15 |
| Laser | 500 | 200 | 2.50 |
| Chain | 12 | 180 | 0.07 |

### 적 위협도 (HP * 속도 / 보상)
| 적 | 위협도 계산 | 위협 레벨 |
|----|------------|-----------|
| Grunt | 50*50/10 = 250 | 중간 |
| Fast | 30*100/15 = 200 | 낮음 |
| Tank | 150*30/30 = 150 | 낮음 |
| Boss | 500*25/100 = 125 | 매우 높음 (실드 포함) |

## 📈 진행 곡선

### 플레이어 파워 커브
- **1-5 웨이브**: 선형 증가 (기본 타워 배치)
- **6-10 웨이브**: 가속 증가 (특수 타워 해금)
- **11-20 웨이브**: 로그 증가 (업그레이드 중심)
- **20+ 웨이브**: 평탄화 (최적화와 전략)

### 적 파워 커브
- **HP 스케일링**: wave * 15% 증가
- **수량 스케일링**: wave * 1.5 증가
- **속도 스케일링**: 최대 50% 까지 점진 증가

## 🎯 전략적 깊이

### 주요 전략 요소
1. **타워 시너지**: 슬로우 + 고데미지 조합
2. **위치 선정**: 경로 커브에서 최대 효율
3. **업그레이드 vs 수량**: 자원 효율성 계산
4. **특수 적 대응**: 카운터 타워 준비

### 메타 전략
- **초반**: Basic 타워로 경제 기반 구축
- **중반**: Sniper/Splash로 효율적 방어
- **후반**: Laser/Chain으로 DPS 극대화
- **특수 대응**: Freeze로 Boss 대응, Poison으로 무리 제어

## 🔄 피드백 루프

### 단기 피드백 (1-3초)
- 적 처치 → 코인 획득 → 즉시 보상
- 타워 공격 → 데미지 표시 → 시각적 만족

### 중기 피드백 (30초-1분)
- 웨이브 클리어 → 다음 준비 시간
- 타워 업그레이드 → 성능 향상 체감

### 장기 피드백 (5분+)
- 웨이브 진행 → 난이도 상승 → 전략 조정
- 최고 기록 갱신 → 성취감

## 📊 밸런스 조정 가이드라인

### 타워 밸런스
- **DPS/Cost 비율**: 0.1-0.2 (특수 타워 제외)
- **업그레이드 효율**: 레벨당 20-30% 성능 향상
- **특수 효과 가치**: 기본 DPS의 50-100% 추가 가치

### 적 밸런스
- **HP/Speed 비율**: 일정하게 유지 (Tank 제외)
- **보상/위협도**: 반비례 관계
- **특수 능력 페널티**: 기본 스탯 20-30% 감소

### 경제 밸런스
- **웨이브당 수입**: 다음 웨이브 준비에 충분한 양
- **업그레이드 vs 신규**: 1:2 비율 유지
- **최소 수입 보장**: 웨이브당 최소 100💰